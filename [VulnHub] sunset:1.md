# Разведка

![image](https://github.com/user-attachments/assets/a7a456bd-dff7-4d2b-80a8-0de95b71839b)

Сканирования показало, что атакуемый хост имеет два открытых порта 21 (ftp) и 22 (ssh). К тому же, порт 21 не исключает возможность анонимного подключения к системе.

# Реализация вектора атаки через порт FTP

Начнём с самого явного вектора атаки. Зайдем в систему как анонимный пользователь. При подключении по FTP у нас запрашивают пароль, но его можно пропустить и в итоге всё равно попасть в систему.

![image](https://github.com/user-attachments/assets/989dad9f-e235-4bf2-9f20-4eacf1a53a5f)

Внутри уязвимой системы был обнаружен файл под названием backup. Для дальнейшего изучения, находка была перемещена на атакующую машину. Запись представляет из себя несколько логинов и хешей. Для дальнейшего перебора следует определить тип хеша. 

При использовании любого идентификатора в сети можно определить, что хеши сгенерированы с помощью возможных алгоритмов sha512crypt $6$ или SHA512 (Unix)

Далее с помощью утилиты john (john the ripper) было выявлено значение хеша от учётной записи sunset.

![image](https://github.com/user-attachments/assets/9af4fb44-496f-43d4-8540-00cd423c70ef)

Таким образом был успешно получен доступ к порту SSH.

![image](https://github.com/user-attachments/assets/927cfd21-2eff-4511-9a5b-76ebfffce3b5)

![image](https://github.com/user-attachments/assets/cab16458-2a32-44cf-b556-7e760f74b6b5)

Флаг user.txt благополучно обнаружен.

# Повышение привилегий

Для начала необходимо перенести на атакуемую систему заготовленный сценарий для поиска уязвимостей. Запускаем веб-сервер при помощи модуля python3 и скачиваем на подконтрольном хосте Linpeas.

![image](https://github.com/user-attachments/assets/d0dd57c2-e3a0-4cf4-acce-9d3abcc9143d)

![image](https://github.com/user-attachments/assets/d8b0cf5b-8fb6-41a5-961a-97d0464fc78a)

Перед запуском сценария делаем файл исполняемым и проводим поиск уязвимостей для дальнейшего повышения привилегий. 

$chmod +x linpeas.sh

$bash linpeas.sh

![image](https://github.com/user-attachments/assets/2937d81e-15c0-4130-ab29-58a76923b4c2)

Отчёт Linpeas показал, что root-права могут быт получены пользователем sunset без запроса пароля. Заходим в GTFOBins и находим необходимые команды для этого.

![image](https://github.com/user-attachments/assets/8e4c4f82-ea9b-415a-84df-e628995cbf6d)

![image](https://github.com/user-attachments/assets/71f8194f-5eb2-4ed3-98fb-ce666551414b)

![image](https://github.com/user-attachments/assets/d8c499d9-cac9-436b-a942-fedb34129300)

Последний флаг был благополучно найден.

![image](https://github.com/user-attachments/assets/961fe72c-426f-462b-875a-9cd32a489849)

Подведём итоги

Долгое время я искал другие вектора атаки на данную машинку, однако автор сделал её довольно-таки простой. По крайней мере она мне такой показалась. Массу инструментов применять тут не пришлось, но вспомнить пару моментов пришлось. Я бы посоветовал разбирать этот кейс совсем новичкам т.к. он знакомит с базовыми вещами в этичном хакинге. 

Спасибо за внимание! 








