# Разведка

~~~
sudo nmap -A 10.10.61.18
~~~

![Pasted image 20240121180724](https://github.com/Cooper14052/Pwned/assets/79376063/5c23cf98-4601-4d52-9d99-283c5d2bd19e)

Видим 2 открытых порта - 22 и 80

![Pasted image 20240121180845](https://github.com/Cooper14052/Pwned/assets/79376063/b1968d37-4add-47a8-a89e-6629ca5e951f)
![Pasted image 20240121180926](https://github.com/Cooper14052/Pwned/assets/79376063/832eef67-7f31-4d85-85df-948663f812c0)
![Pasted image 20240121180945](https://github.com/Cooper14052/Pwned/assets/79376063/f441abce-46cc-4fae-bba6-38012eb428b3)

Заходим на веб-страницу машины
![[Pasted image 20240121181448.png]]
Сканируем директории 
~~~
gobuster dir -u http://10.10.61.18/ -w /usr/share/wordlists/dirb/common.txt
~~~

![[Pasted image 20240121181731.png]]
Находим 2 интересующие нас директории - /panel и /uploads с 301 кодом HTTP(перенаправление). Если зайти в директорию js, то можно проинспектировать безопасность кода страницы.
![[Pasted image 20240121181803.png]]
Просматриваем директорию /panel и наблюдаем страницу с возможностью загружать различные файлы
![[Pasted image 20240121181910.png]]

# Внедрение в систему

Попробуем использовать популярный ревёрс-shell от pentestmonkey
![[Pasted image 20240121182158.png]]
Изменяем параметр ip в коде шелла на свой(vpn)
![[Pasted image 20240121183054.png]]
И наблюдаем ошибку...
![[Pasted image 20240121184139.png]]
Пробуем обмануть систему защиты от php кода и изменяем формат шелла на php5
![[Pasted image 20240121184056.png]]
И такой трюк срабатывает
Используем утилиту netcat для получения подключения
~~~
nc -lvnp 1234
~~~
Заходим в директорию uploads и получаем подключение к машине
![[Pasted image 20240121184447.png]]
![[Pasted image 20240121184610.png]]
Ищем пользовательский флаг
~~~
find / -name user.txt
~~~
![[Pasted image 20240121232901.png]]
![[Pasted image 20240121232957.png]]
И получаем желанный результат
![[Pasted image 20240121233034.png]]
# Повышение привелегий

В самом задании мы имеем подсказку о SUID файлах
Производим поиск всех файлов с SUID
~~~
 find / -type f -user root -perm -u=s 2> /dev/null  
~~~
![[Pasted image 20240121233857.png]]
Нас интересует python
![[Pasted image 20240121234345.png]]
Воспользуемся специальным поисковиком для повышения привилегий 
![[Pasted image 20240121233943.png]]
Находим нужную команду
![[Pasted image 20240121234026.png]]
И получаем root флаг
![[Pasted image 20240121234200.png]]
![[Pasted image 20240121234248.png]]
![[Pasted image 20240121234427.png]]

В дальнейшем я хочу найти больше способов пройти эту машину. На данный момент публикую в таком виде, но буду вносить поправки с найденными уязвимостями.
